version: '3.9'

services:
  mercantiq-app:
    build:
      context: ../..
      dockerfile: mercantiq.app/Dockerfile
    container_name: mercantiq-app
    restart: unless-stopped
    environment:
      - NODE_ENV=production
      - PORT=6750
      - OTEL_EXPORTER_OTLP_ENDPOINT=http://geniuserp-otel-collector:4318
      - OTEL_SERVICE_NAME=mercantiq.app
    ports:
      - "6750:6750"
    networks:
      - default
      - geniuserp_net_observability
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:6750/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

networks:
  geniuserp_net_observability:
    external: true
