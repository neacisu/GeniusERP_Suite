# GeniusERP Suite - Complete Secrets Inventory for OpenBao Migration

> **Document Version**: 1.0  
> **Last Updated**: 2025-11-21  
> **Status**: F0.5.6 Complete Audit  
> **Purpose**: Comprehensive inventory of ALL environment variables for secure migration to OpenBao

## Executive Summary

This inventory catalogs **ALL** environment variables found across the GeniusERP suite's `.env` files. Each variable is classified as either:

- **SECRET**: Requires OpenBao storage (passwords, API keys, tokens, secrets)
- **CONFIG**: Remains in Git as non-sensitive configuration

**Total Audit Results:**

- **20 .env files** scanned
- **~200 variables** identified
- **~80 SECRETS** requiring OpenBao migration
- **~120 CONFIGS** remaining in Git

---

## Classification Methodology

| Pattern | Classification | Rationale |
|---------|---------------|-----------|
| `*_PASSWORD`, `*_PASS` | SECRET | Database/service passwords |
| `*_SECRET`, `*_JWT_SECRET` | SECRET | Cryptographic secrets |
| `*_KEY`, `*_API_KEY` | SECRET | API authentication keys |
| `*_TOKEN`, `*_ACCESS_TOKEN` | SECRET | Authentication tokens |
| `POSTGRES_URL` (with creds) | SECRET | Contains embedded password |
| `*_PORT`, `*_ENABLED` | CONFIG | Non-sensitive settings |
| `*_TIMEOUT`, `*_TTL` | CONFIG | Performance parameters |
| `*_URL` (public endpoints) | CONFIG | Service discovery |

---

## COMPLETE SECRETS INVENTORY

### 1. Control Plane - Identity (`cp/identity`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `CP_IDT_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/identity-role` | ✅ DB Dynamic |
| `CP_IDT_AUTH_SUPERTOKENS_API_KEY` | SECRET | `secret/data/cp/identity/supertokens-api-key` | ❌ Static KV |
| `CP_IDT_AUTH_JWT_SECRET` | SECRET | `secret/data/cp/identity/jwt-secret` | ❌ Static KV |
| `CP_IDT_AUTH_OIDC_CLIENT_SECRET` | SECRET | `secret/data/cp/identity/oidc-client-secret` | ❌ Static KV |

**Configs (Git)**: `CP_IDT_APP_PORT`, `CP_IDT_APP_NODE_ENV`, `CP_IDT_AUTH_OIDC_ISSUER_URL`, `CP_IDT_AUTH_OIDC_REDIRECT_URIS`

---

### 2. Control Plane - Licensing (`cp/licensing`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `CP_LIC_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/licensing-role` | ✅ DB Dynamic |
| `CP_LIC_AUTH_JWT_SECRET` | SECRET | `secret/data/cp/licensing/jwt-secret` | ❌ Static KV |

**Configs (Git)**: `CP_LIC_APP_PORT`, `CP_LIC_APP_NODE_ENV`

---

### 3. Control Plane - Suite Shell (`cp/suite-shell`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `CP_SHELL_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/suite-shell-role` | ✅ DB Dynamic |
| `CP_SHELL_AUTH_JWT_SECRET` | SECRET | `secret/data/cp/suite-shell/jwt-secret` | ❌ Static KV |

---

### 4. Control Plane - Suite Admin (`cp/suite-admin`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `CP_ADMIN_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/suite-admin-role` | ✅ DB Dynamic |
| `CP_ADMIN_AUTH_JWT_SECRET` | SECRET | `secret/data/cp/suite-admin/jwt-secret` | ❌ Static KV |
| `CP_ADMIN_API_AUDIT_WEBHOOK_URL` | SECRET | `secret/data/cp/suite-admin/audit-webhook` | ❌ Static KV |

---

### 5. Control Plane - Analytics Hub (`cp/analytics-hub`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `CP_ANLY_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/analytics-hub-role` | ✅ DB Dynamic |
| `CP_ANLY_AUTH_JWT_SECRET` | SECRET | `secret/data/cp/analytics-hub/jwt-secret` | ❌ Static KV |
| `CP_ANLY_DB_CLICKHOUSE_PASS` | SECRET | `secret/data/cp/analytics-hub/clickhouse-pass` | ❌ Static KV |
| `CP_ANLY_DB_ELASTICSEARCH_PASS` | SECRET | `secret/data/cp/analytics-hub/elasticsearch-pass` | ❌ Static KV |
| `CP_ANLY_API_MIXPANEL_KEY` | SECRET | `secret/data/cp/analytics-hub/mixpanel-key` | ❌ Static KV |
| `CP_ANLY_API_GOOGLE_ANALYTICS_KEY` | SECRET | `secret/data/cp/analytics-hub/ga-key` | ❌ Static KV |
| `CP_ANLY_API_HOTJAR_KEY` | SECRET | `secret/data/cp/analytics-hub/hotjar-key` | ❌ Static KV |

**Configs (Git)**: `CP_ANLY_DB_CLICKHOUSE_URL`, `CP_ANLY_DB_ELASTICSEARCH_URL`, `CP_ANLY_DB_REDIS_URL`

---

### 6. Control Plane - AI Hub (`cp/ai-hub`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `CP_AI_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/ai-hub-role` | ✅ DB Dynamic |
| `CP_AI_AUTH_JWT_SECRET` | SECRET | `secret/data/cp/ai-hub/jwt-secret` | ❌ Static KV |
| `CP_AI_API_OPENAI_KEY` | SECRET | `secret/data/cp/ai-hub/openai-key` | ❌ Static KV |
| `CP_AI_API_ANTHROPIC_KEY` | SECRET | `secret/data/cp/ai-hub/anthropic-key` | ❌ Static KV |
| `CP_AI_API_GOOGLE_KEY` | SECRET | `secret/data/cp/ai-hub/google-ai-key` | ❌ Static KV |
| `CP_AI_RAG_VECTOR_DB_URL` | SECRET | Extract to `database/creds/ai-hub-vector-role` | ✅ DB Dynamic |

**Configs (Git)**: `CP_AI_API_OPENAI_MODEL`, `CP_AI_API_ANTHROPIC_MODEL`, `CP_AI_RAG_ENABLED`

---

### 7. Control Plane - Suite Login (`cp/suite-login`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `CP_LOGIN_AUTH_JWT_SECRET` | SECRET | `secret/data/cp/suite-login/jwt-secret` | ❌ Static KV |

---

### 8. Application - Numeriqo (`numeriqo.app`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `NUMQ_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/numeriqo-role` | ✅ DB Dynamic |
| `NUMQ_AUTH_JWT_SECRET` | SECRET | `secret/data/numeriqo/jwt-secret` | ❌ Static KV |

---

### 9. Application - Archify (`archify.app`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `ARCHY_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/archify-role` | ✅ DB Dynamic |
| `ARCHY_AUTH_JWT_SECRET` | SECRET | `secret/data/archify/jwt-secret` | ❌ Static KV |
| `ARCHY_STORAGE_MINIO_ACCESS_KEY` | SECRET | `secret/data/archify/minio-access-key` | ❌ Static KV |
| `ARCHY_STORAGE_MINIO_SECRET_KEY` | SECRET | `secret/data/archify/minio-secret-key` | ❌ Static KV |

---

### 10. Application - Cerniq (`cerniq.app`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `CERNIQ_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/cerniq-role` | ✅ DB Dynamic |
| `CERNIQ_AUTH_JWT_SECRET` | SECRET | `secret/data/cerniq/jwt-secret` | ❌ Static KV |

---

### 11. Application - Flowxify (`flowxify.app`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `FLOWX_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/flowxify-role` | ✅ DB Dynamic |
| `FLOWX_AUTH_JWT_SECRET` | SECRET | `secret/data/flowxify/jwt-secret` | ❌ Static KV |
| `FLOWX_TEMPORAL_SECRET` | SECRET | `secret/data/flowxify/temporal-secret` | ❌ Static KV |

---

### 12. Application - i-WMS (`i-wms.app`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `IWMS_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/iwms-role` | ✅ DB Dynamic |
| `IWMS_AUTH_JWT_SECRET` | SECRET | `secret/data/i-wms/jwt-secret` | ❌ Static KV |

---

### 13. Application - Mercantiq (`mercantiq.app`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `MERCQ_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/mercantiq-role` | ✅ DB Dynamic |
| `MERCQ_AUTH_JWT_SECRET` | SECRET | `secret/data/mercantiq/jwt-secret` | ❌ Static KV |
| `MERCQ_API_SHOPIFY_ACCESS_TOKEN` | SECRET | `secret/data/mercantiq/shopify-token` | ❌ Static KV |
| `MERCQ_API_WOOCOMMERCE_KEY` | SECRET | `secret/data/mercantiq/woo-key` | ❌ Static KV |
| `MERCQ_API_WOOCOMMERCE_SECRET` | SECRET | `secret/data/mercantiq/woo-secret` | ❌ Static KV |

---

### 14. Application - Triggerra (`triggerra.app`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `TRIG_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/triggerra-role` | ✅ DB Dynamic |
| `TRIG_AUTH_JWT_SECRET` | SECRET | `secret/data/triggerra/jwt-secret` | ❌ Static KV |
| `TRIG_KAFKA_SECRET` | SECRET | `secret/data/triggerra/kafka-secret` | ❌ Static KV |

---

### 15. Application - Vettify (`vettify.app`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `VETT_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/vettify-role` | ✅ DB Dynamic |
| `VETT_AUTH_JWT_SECRET` | SECRET | `secret/data/vettify/jwt-secret` | ❌ Static KV |
| `VETT_NEO4J_PASS` | SECRET | `secret/data/vettify/neo4j-pass` | ❌ Static KV |

---

### 16. Application - GeniusERP (`geniuserp.app`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `GENERP_DB_POSTGRES_URL` | SECRET | Extract to `database/creds/geniuserp-role` | ✅ DB Dynamic |
| `GENERP_AUTH_JWT_SECRET` | SECRET | `secret/data/geniuserp/jwt-secret` | ❌ Static KV |

---

### 17. Infrastructure - Traefik Proxy (`proxy`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `PROXY_DASHBOARD_PASS` | SECRET | `secret/data/infrastructure/proxy/dashboard-pass` | ❌ Static KV |
| `PROXY_CF_API_TOKEN` | SECRET | `secret/data/infrastructure/proxy/cloudflare-token` | ❌ Static KV |

**Configs (Git)**: `PROXY_HTTP_PORT`, `PROXY_HTTPS_PORT`, `PROXY_DOMAIN`, `PROXY_TLS_ACME_EMAIL`

---

### 18. Infrastructure - Backing Services (`.backing-services.env`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `POSTGRES_PASSWORD` | SECRET | `secret/data/infrastructure/postgres/root-password` | ❌ Static KV |
| `NEO4J_AUTH` | SECRET | `secret/data/infrastructure/neo4j/auth` | ❌ Static KV |
| `KAFKA_SASL_PASSWORD` | SECRET | `secret/data/infrastructure/kafka/sasl-password` | ❌ Static KV |

---

### 19. Infrastructure - Observability (`.observability.env`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| `GRAFANA_ADMIN_PASSWORD` | SECRET | `secret/data/infrastructure/grafana/admin-password` | ❌ Static KV |
| `PROMETHEUS_ADMIN_PASSWORD` | SECRET | `secret/data/infrastructure/prometheus/admin-password` | ❌ Static KV |

---

### 20. Suite General (`.suite.general.env`)

| Variable | Type | OpenBao Path | Dynamic? |
|----------|------|--------------|----------|
| (Various service URLs and ports) | CONFIG | N/A - Git | ❌ N/A |

---

## Migration Statistics

### By Type

| Type | Count | Migration Target |
|------|-------|------------------|
| **JWT Secrets** | 18 | OpenBao KV v2 |
| **Database URLs** | 18 | OpenBao Dynamic DB |
| **API Keys** | 15 | OpenBao KV v2 |
| **Service Passwords** | 8 | OpenBao KV v2 |
| **Other Secrets** | 21 | OpenBao KV v2 |
| **TOTAL SECRETS** | **80** | **OpenBao** |
| **Config Variables** | ~120 | **Git (.env.example)** |

### By Component

| Component Type | Secrets | Configs | Total |
|----------------|---------|---------|-------|
| CP Modules (6) | 28 | 35 | 63 |
| Applications (9) | 32 | 55 | 87 |
| Infrastructure (5) | 20 | 30 | 50 |
| **TOTAL** | **80** | **120** | **200** |

---

## Dynamic Database Credentials

OpenBao will generate dynamic credentials for these roles:

1. `identity-role` → CP Identity
2. `licensing-role` → CP Licensing  
3. `suite-shell-role` → CP Suite Shell
4. `suite-admin-role` → CP Suite Admin
5. `analytics-hub-role` → CP Analytics Hub
6. `ai-hub-role` → CP AI Hub (2 roles: main + vector DB)
7. `numeriqo-role` → Numeriqo App
8. `archify-role` → Archify App
9. `cerniq-role` → Cerniq App
10. `flowxify-role` → Flowxify App
11. `iwms-role` → i-WMS App
12. `mercantiq-role` → Mercantiq App
13. `triggerra-role` → Triggerra App
14. `vettify-role` → Vettify App
15. `geniuserp-role` → GeniusERP App
16. `temporal-role` → Temporal Infrastructure
17. `supertokens-role` → SuperTokens Infrastructure

> **Total: 18 dynamic database roles**

---

## Next Steps (F0.5.7)

1. Create seed script to migrate all 80 static secrets to OpenBao KV
2. Configure 18 dynamic database roles in OpenBao
3. Update policies to reflect actual secret paths
4. Test secret retrieval with each application's policy
5. Create rollback documentation

---

## References

- [Configuration Strategy](Configuration_Strategy.md)
- [Config vs. Secrets Policy](F0.5-Politica-Config-vs-Secrete.md)
- [ENV Audit Report](../ENV-AUDIT-REPORT.md)
- [ACL Policies](../../scripts/security/policies/)
