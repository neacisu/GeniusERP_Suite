# ============================================
# TRIGGERRA - WORKFLOW AUTOMATION & RULE ENGINE
# ============================================
# Triggerra-specific configuration
# Local overrides: triggerra.app/.env.local (gitignored)
# Production: triggerra.app/.env.production (gitignored)

# ===== APPLICATION IDENTITY =====
PORT=3106
SERVICE_NAME=triggerra
SERVICE_VERSION=1.0.0

# ===== RULE ENGINE =====
TRIGGERRA_RULE_ENGINE=drools # drools | easy-rules | rete | custom
TRIGGERRA_ENABLE_COMPLEX_RULES=true
TRIGGERRA_ENABLE_TEMPORAL_RULES=true
TRIGGERRA_ENABLE_FUZZY_LOGIC=false
TRIGGERRA_MAX_RULE_COMBINATIONS=10000

# ===== EVENT PROCESSING =====
TRIGGERRA_EVENT_ENGINE=kafka # kafka | rabbitmq | redis | nats
TRIGGERRA_KAFKA_BROKERS=localhost:9092
TRIGGERRA_KAFKA_CONSUMER_GROUP=triggerra-consumer
TRIGGERRA_ENABLE_REAL_TIME_EVENTS=true
TRIGGERRA_ENABLE_DELAYED_EVENTS=true

# ===== TRIGGERS & ACTIONS =====
TRIGGERRA_ENABLE_TIME_BASED_TRIGGERS=true
TRIGGERRA_ENABLE_EVENT_BASED_TRIGGERS=true
TRIGGERRA_ENABLE_DATA_BASED_TRIGGERS=true
TRIGGERRA_ENABLE_MANUAL_TRIGGERS=true

# Time-based Trigger Settings
TRIGGERRA_SCHEDULE_ENGINE=quartz # quartz | cron | spring-scheduler
TRIGGERRA_MAX_CONCURRENT_SCHEDULES=1000
TRIGGERRA_TIMEZONE=Europe/Bucharest

# ===== ACTION TYPES =====
TRIGGERRA_ENABLE_EMAIL_ACTIONS=true
TRIGGERRA_ENABLE_SMS_ACTIONS=false
TRIGGERRA_ENABLE_NOTIFICATION_ACTIONS=true
TRIGGERRA_ENABLE_WEBHOOK_ACTIONS=true
TRIGGERRA_ENABLE_SLACK_ACTIONS=false
TRIGGERRA_ENABLE_DATABASE_ACTIONS=true
TRIGGERRA_ENABLE_API_ACTIONS=true

# Email Configuration
TRIGGERRA_SMTP_HOST=smtp.example.com
TRIGGERRA_SMTP_PORT=587
TRIGGERRA_SMTP_USER=noreply@example.com
TRIGGERRA_SMTP_PASSWORD=

# SMS Configuration
TRIGGERRA_SMS_PROVIDER=twilio # twilio | nexmo
TRIGGERRA_TWILIO_ACCOUNT_SID=
TRIGGERRA_TWILIO_AUTH_TOKEN=

# Slack Configuration
TRIGGERRA_SLACK_WEBHOOK_URL=

# ===== RULE BUILDER & DESIGNER =====
TRIGGERRA_ENABLE_VISUAL_RULE_BUILDER=true
TRIGGERRA_ENABLE_NATURAL_LANGUAGE_RULES=false
TRIGGERRA_ENABLE_RULE_VERSIONING=true
TRIGGERRA_ENABLE_RULE_TESTING=true

# ===== MONITORING & LOGGING =====
TRIGGERRA_ENABLE_TRIGGER_AUDIT_LOG=true
TRIGGERRA_ENABLE_ACTION_LOGGING=true
TRIGGERRA_ENABLE_ERROR_TRACKING=true
TRIGGERRA_ENABLE_PERFORMANCE_METRICS=true
TRIGGERRA_LOG_RETENTION_DAYS=90

# ===== TRIGGER LIMITS & THROTTLING =====
TRIGGERRA_MAX_TRIGGERS_PER_APP=1000
TRIGGERRA_MAX_TRIGGERS_PER_USER=100
TRIGGERRA_ENABLE_TRIGGER_THROTTLING=true
TRIGGERRA_THROTTLE_REQUESTS_PER_SECOND=100
TRIGGERRA_ENABLE_RATE_LIMITING=true

# ===== ERROR HANDLING & RETRY =====
TRIGGERRA_MAX_RETRIES=3
TRIGGERRA_RETRY_DELAY=5000
TRIGGERRA_ENABLE_DEAD_LETTER_QUEUE=true
TRIGGERRA_ENABLE_FALLBACK_ACTIONS=true

# ===== WORKFLOW STATE MANAGEMENT =====
TRIGGERRA_ENABLE_SAGA_PATTERN=false
TRIGGERRA_ENABLE_STATE_MACHINES=true
TRIGGERRA_ENABLE_COMPENSATION=false

# ===== INTEGRATIONS =====
TRIGGERRA_ENABLE_SUITE_INTEGRATION=true
SUITE_SHELL_URL=http://localhost:3001
SUITE_LOGIN_URL=http://localhost:3003

# Flowxify Integration (for complex workflows)
TRIGGERRA_ENABLE_FLOWXIFY_INTEGRATION=false
FLOWXIFY_API_URL=http://localhost:3102

# GeniusERP Integration (for business events)
TRIGGERRA_ENABLE_GENIUSERP_INTEGRATION=true
GENIUSERP_API_URL=http://localhost:8000

# Cerniq Integration (for data-driven triggers)
TRIGGERRA_ENABLE_CERNIQ_INTEGRATION=false
CERNIQ_API_URL=http://localhost:3101

# ===== PERFORMANCE & CACHING =====
TRIGGERRA_CACHE_ENABLED=true
TRIGGERRA_CACHE_TTL=3600
TRIGGERRA_ENABLE_RULE_CACHING=true
TRIGGERRA_RULE_CACHE_TTL=1800
TRIGGERRA_ENABLE_COMPRESSION=true

# ===== RESOURCE LIMITS =====
TRIGGERRA_MAX_CONCURRENT_EXECUTIONS=500
TRIGGERRA_EXECUTION_TIMEOUT=300000 # 5 minutes
TRIGGERRA_MEMORY_LIMIT=2048 # MB
